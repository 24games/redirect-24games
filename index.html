<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <title>24Games - Redirecionando...</title>

    <!-- Redirect Script -->
    <script>
      (function() {
        // Captura o pathname logo no início, antes do React Router
        var initialPathname = window.location.pathname;
        
        // Landing pages conhecidas
        var landingPages = {
          'supercuota': {
            baseUrl: 'https://go.aff.24gamespartners.com/3w15f015',
            utmPrefix: 'sportbook_'
          }
        };
        
        // Função para detectar landing page e slug
        function getLandingPageAndSlug() {
          // Usa o pathname inicial capturado
          var pathname = initialPathname || window.location.pathname;
          var segments = pathname.replace(/^\//, '').split('/').filter(function(s) { return s && s.length > 0; });
          
          var landingPage = null;
          var slug = 'cr1'; // padrão
          
          if (segments.length >= 2) {
            // Ex: /supercuota/cr1
            landingPage = segments[0];
            slug = segments[1];
          } else if (segments.length === 1) {
            // Ex: /cr1 ou /supercuota
            if (landingPages[segments[0]]) {
              landingPage = segments[0];
              slug = 'cr1'; // padrão para landing page sem slug
            } else {
              landingPage = null;
              slug = segments[0];
            }
          }
          
          return { landingPage: landingPage, slug: slug };
        }
        
        // Função para gerar o URL de redirecionamento
        function getRedirectUrl() {
          var result = getLandingPageAndSlug();
          var landingPage = result.landingPage;
          var slug = result.slug;
          
          var config = landingPages[landingPage] || {
            baseUrl: 'https://go.aff.24gamespartners.com/ep66d86x',
            utmPrefix: 'casino_'
          };
          
          var baseUrl = config.baseUrl + '?utm_campaign=' + config.utmPrefix + slug;
          return baseUrl;
        }
        
        // Função de redirect que pode ser chamada de múltiplas formas
        function performRedirect() {
          try {
            var params = window.location.search;
            var base_url = getRedirectUrl();
            var separator = base_url.includes('?') ? '&' : '?';
            var redirect_link_with_params = params ? base_url + separator + params.substring(1) : base_url;
            
            if (redirect_link_with_params) {
              window.location.href = redirect_link_with_params;
            }
          } catch (e) {
            console.error('Redirect error:', e);
          }
        }
        
        // Executa quando a página carrega
        if (document.readyState === 'loading') {
          window.addEventListener('load', function() {
            setTimeout(performRedirect, 2000);
          });
        } else {
          // Se já carregou, executa direto
          setTimeout(performRedirect, 2000);
        }
        
        // Backup: executa após um tempo maior caso o anterior não funcione
        setTimeout(performRedirect, 5000);
      })();
    </script>

    <!-- Backredirect -->
    <script>
      (function() {
        // Captura o pathname logo no início
        var initialPathname = window.location.pathname;
        
        // Landing pages conhecidas
        var landingPages = {
          'supercuota': {
            baseUrl: 'https://go.aff.24gamespartners.com/3w15f015',
            utmPrefix: 'sportbook_'
          }
        };
        
        // Função para detectar landing page e slug
        function getLandingPageAndSlug() {
          var pathname = initialPathname || window.location.pathname;
          var segments = pathname.replace(/^\//, '').split('/').filter(function(s) { return s && s.length > 0; });
          
          var landingPage = null;
          var slug = 'cr1'; // padrão
          
          if (segments.length >= 2) {
            landingPage = segments[0];
            slug = segments[1];
          } else if (segments.length === 1) {
            if (landingPages[segments[0]]) {
              landingPage = segments[0];
              slug = 'cr1';
            } else {
              landingPage = null;
              slug = segments[0];
            }
          }
          
          return { landingPage: landingPage, slug: slug };
        }
        
        // Função para gerar o URL de redirecionamento
        function getRedirectUrl() {
          var result = getLandingPageAndSlug();
          var landingPage = result.landingPage;
          var slug = result.slug;
          
          var config = landingPages[landingPage] || {
            baseUrl: 'https://go.aff.24gamespartners.com/ep66d86x',
            utmPrefix: 'casino_'
          };
          
          var baseUrl = config.baseUrl + '?utm_campaign=' + config.utmPrefix + slug;
          return baseUrl;
        }
        
        var params = window.location.search;
        var back_redirect_back_link = getRedirectUrl() + params;
        history.pushState({}, "", location.href);
        history.pushState({}, "", location.href);
        window.onpopstate = function () {
          setTimeout(function () {
            location.href = back_redirect_back_link;
          }, 1);
        };
      })();
    </script>
    <!-- Backredirect -->

    <!-- Meta Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1108404008025075');
      fbq('track', 'PageView');
    </script>
    <!-- End Meta Pixel Code -->
  </head>
  <body>
    <!-- Meta Pixel Noscript -->
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1108404008025075&ev=PageView&noscript=1"
    /></noscript>
    
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

